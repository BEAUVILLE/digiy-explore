<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <title>Proposer un spot — DIGIY EXPLORE</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body{font-family:system-ui;background:#061b14;color:white;padding:20px}
    input,select,textarea{
      width:100%;padding:10px;margin:6px 0;
      border-radius:12px;border:1px solid rgba(255,255,255,.2);
      background:#0b2a1f;color:white;
    }
    button{
      padding:12px 16px;border:none;border-radius:999px;
      background:#22c55e;font-weight:900;cursor:pointer;
    }
  </style>
</head>

<body>
<h2>➕ Proposer un spot DIGIY</h2>
<p>Ton spot sera validé par DIGIY avant publication.</p>

<input id="name" placeholder="Nom du spot">
<select id="type">
  <option value="resto">Resto</option>
  <option value="plage">Plage</option>
  <option value="culture">Culture</option>
  <option value="nature">Nature</option>
  <option value="hebergement">Hébergement</option>
  <option value="activite">Activité</option>
</select>

<input id="city" placeholder="Ville (ex: Saly)">
<input id="lat" placeholder="Latitude">
<input id="lng" placeholder="Longitude">

<textarea id="desc" placeholder="Description rapide"></textarea>

<button onclick="submitSpot()">Envoyer</button>

<script>
const SUPABASE_URL = "https://wesqmwjjtsefyjnluosj.supabase.co";
const SUPABASE_ANON_KEY = "✅TON_ANON_KEY_ICI";

const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

async function submitSpot(){
  const spot = {
    name: document.getElementById("name").value,
    type: document.getElementById("type").value,
    city: document.getElementById("city").value,
    zone: "senegal",
    lat: parseFloat(document.getElementById("lat").value),
    lng: parseFloat(document.getElementById("lng").value),
    description: document.getElementById("desc").value,
    status:"draft"
  };

  const { error } = await sb.from("digiy_explore_spots").insert([spot]);

  if(error){
    alert("Erreur envoi");
    console.error(error);
    return;
  }

  alert("✅ Spot envoyé ! DIGIY va valider bientôt.");
  location.href="./index.html";
}
</script>
</body>
</html>
